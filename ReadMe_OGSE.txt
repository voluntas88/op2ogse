Посвящается Дяде Саше (Bacha),
который был с нами с самого начала, но не увидел окончания.


-= Old Good S.T.A.L.K.E.R. Evolution =-
< версия 0.6.9.3 Final 1.1>

В далёком 2010-м году никто и предположить не мог, что задуманное как небольшой апдейт для 0.6.9.2 R2 в итоге, спустя четыре года, выльется в самый высокотехнологичный мод на ТЧ. По части новых технологий ему нет равных, местами наши программисты сделали то, что не осилили GSC или что считалось принципиально невозможным сделать без доступа к исходному коду игры.

К сожалению, не всё было так замечательно: почти весь 2013-й год по разным причинам выпал из разработки: тут и усталость от игры, и личные дела, технические трудности, постоянные переделки уже готового. Всё это поспособствовало уходу из команды разработчиков талантливых личностей, почему так и не были реализованы многие задумки. 

От очень многого пришлось отказаться из-за отсутствия необходимых специалистов. К сожалению, те, кто просились в команду, довольно быстро пропадали за горизонтом. Осилить всё сами мы не могли никак. К концу 2013-го года модификация представляла собой некое подобие альфа-версии с кучей недоработок, багов и косяков. Но нашлись действительно творческие и увлечённые товарищи, которые взялись за исправление неработающего и доделке недоделанного. Посему сейчас модификация стала вполне удобоваримым продуктом :-)

Много негатива было в сторону GSC, выпустивших ТЧ в том виде, в каком мы все в него изначально играли. В период разработки ОГСЕ постоянно сталкивались с жуткими костылями, заплатками, недоделками разработчиков из GSC. Почему это так – не нам судить, но поверьте, мы не раз чертыхались, сталкиваясь с очередным косяком оригинала. Более того, даже перед самым выходом мода открылся еще один серьёзный баг, связанный с защитными характеристиками костюмов: выражаясь кратко, они не работали никогда. Что ещё интереснее: чем больше была защита костюма, тем слабее он защищал; хотите – верьте, хотите – нет. 

Нехорошим было моё знакомство с тем, в каком исковерканном виде вошли в релиз ТЧ игровые локации. Я говорю не про смену концепции, когда локации полностью перекраивались, а только про релизные недоделки – при том, что в ранних билдах многое было в нормальном состоянии. Даже выработался определенный сленг для описания этих косяков вроде «бутербродная AI-сетка», когда на одной плоскости лежат друг на друге два AI-узла (невидимые игроку квадратики по которым ходят NPC). Многочисленные дыры в этой самой AI-сетке в тех местах, где на билдовской локации стояло дерево, столб, скамейка, а в релизной убрали (в игре это выглядит, как NPC вдруг ни с того, ни с сего взял и обошёл абсолютно пустое место). Некоторые локации, например Темная Долина, представляли сплошное сито, столько там было таких «дыр». Всё это надо было исправлять: восстанавливать удаленные объекты или перекладывать AI-сетку. Приличное количество игровых «хвостов», ведущих в никуда, осталось в релизе ТЧ от ранних билдов. Естественно, это не отражалось в лучшую сторону на стабильности игры. В ОГСЕ 0.6.9.3 все найденные недочёты были устранены.

Много хорошего необходимо сказать про наших программистов Александра и Костю (Malandrinus и K.D.). Именно их надо поблагодарить за то, как серьёзно мод преобразился в техническом плане. Теперь, играя в S.T.A.L.K.E.R, вы можете насладиться невиданными ранее графическими эффектами и геймплейными особенностями, которых нет не только ни в каком другом моде на ТЧ, но и в ЧН/ЗП, либо они были прерогативой последних. И все это без наличии исходного кода игры. При этом мы не стали ничего таить, и большинство правок доступно любому желающему в открытом проекте X-ray extensions http://code.google.com/p/xray-extensions/ 

Естественно, пришлось пойти на кое-какие жертвы, например полностью вырезали первый рендер «статика». Но это пошло только на пользу: позволило направить силы на развитие второго рендера «динамическое освещение», а только на нём возможны все новые графические эффекты вроде «солнечных лучей», «отражений», правильные тени и т.д. Кроме того, это позволило ускорить работу с шейдерами, а также загрузку игры, уровней и сохранений.

Отдельно стоит поблагодарить Романа (abramcumner) за то, что взял на себя очень тяжелый участок – квесты, оставшиеся в недоделанном виде после ухода Jek@n.

Ну и конечно, нельзя забыть о Юре (SimplyYuri), человеке, который доводил до белого каления всех разработчиков не только свои мнением по поводу, что хорошо, а что плохо, как надо и как не надо, но и своим дотошным исследованием каждой кочки локации, указанием на каждый поворот NPC не в ту сторону и т.п. И постоянным долблением об исправлении этих косяков.

Если оглянуться назад в далёкий 2010-й год и посмотреть на день сегодняшний, думаю, можно с уверенностью сказать, что время было потрачено не зря, хоть и не всегда оптимально :-)

Желаю приятной игры.

Георгий (Deathdoor)

-= Техническая информация =-


ВНИМАНИЕ!
Известные проблемы:

У двух локаций мода имеется несовместимость LOD-геометрии со старыми видеокартами nVidia серий GeForce GTX 2XX, поэтому если вы обладатель видеокарты этой серии, например GeForce GTX 260 или 280, вам перед входом на локации Мертвый Город (Городок-32) и Топи необходимо установить в расширенных настройках графики игры ползунок «Детализация объектов» на минимум. В противном случае может произойти сбой видеодрайверов с последующим зависанием игры и/или вылетом системы в BSOD. Однако даже это действие полностью не устранит проблему, и у владельцев этих видеокарт могут наблюдаться визуальные артефакты на этих локация. Приносим им за это свои извинения, но к сожалению полностью устранить эту проблему не удалось. На более свежих сериях видеокарт таких проблем замечено не было. 
Далее, пресеты графики в главном меню игры могут содержать не все необходимые настройки из расширенных опций, поэтому после выставления пресета желательно войти в расширенные настройки и далее произвести настройку графики по вашему вкусу и быстродействию. Иначе часть красивых эффектов просто не будет включена, хотя ваша система может их вполне тянуть.


-= Общие указания =-

Отладочный вывод боевки и выброса:

В боевку и в выброс у нас встроены механизмы для вывода в лог подробных сведений о их ходе. По умолчанию это отключено, так как немного тормозит игру, однако если вы обладатель мощного ПК и для вас некритично падение скорости на 5-6 fps, тогда мы будем вам признательны, если вы включите эти логи. В этом случае при возникновении проблем в боевке или выбросе их будет значительно проще отладить. Чтобы включить запись отладки, нужно в консоли ввести команду:

write_debug_log on

Порядок действий при вылете модификации:

Необходимо обязательно передать нам лог и дамп вылета. Для этого у себя в системе, по пути c:\Users\Public\Documents\STALKER-SHOC\logs\ возьмите после вылета файлы лога и дампа (первый имеет имя вида xray_<имя_пользователя>_<дата>_<время>.mdmp.log, второй аналогично xray_<имя_пользователя>_<дата>_<время>.mdmp), упакуйте их в архив, и напишите отзыв у нас на форуме в соответствующей теме, указав подробно обстоятельства вылета и приложив архив с логом и дампом. Если вылет воспроизводится, приложите так же файл сейва, взяв его по пути c:\Users\Public\Documents\STALKER-SHOC\ savedgames\.

Порядок действий при некорректном поведении NPC или других объектов:

Если вы обнаружили странного NPC, который себя непонятно ведет или выглядит зависшим, а так же при обнаружении аналогичного поведения других динамических объектов – монстров, вертолетов и т.п., сделайте следующее: выйдите в главное меню игры, нажмите там клавишу “P” (англ.) и вернитесь в игру. Включится визуальный отладочный режим, в котором при наведении на NPC или другой дин. объект высветиться информация о нем. Сделайте скриншот и выложите нам с описанием проблемы в соответствующей теме форума. Так же хорошо приложить к этому сейв, особенно если после сейв/лоада это состояние сохраняется.

-= Системные требования =-


Операционная система, количество оперативной памяти:

Windows XP при ОЗУ не менее 3 Гб
Windows 7 x64 при ОЗУ не менее 4 Гб
Windows 8/8.1 x64 при ОЗУ не менее 4 Гб

Стабильная работа мода на конфигурациях с Windows XP и ОЗУ менее 3 Гб, а так же Windows 7 x86 при любом количестве ОЗУ НЕВОЗМОЖНА, базовая инсталляция мода на таких конфигурациях заблокирована, техническая поддержка данных конфигураций не осуществляется, так как 90% проблем и вылетов на них связаны с нехваткой памяти. Это надежно установлено тестированием и неоднократно подтверждено в процессе разработки. Поэтому, пожалуйста, перед тем как сообщать о проблемах, убедитесь, что ваша система в точности отвечает требованиям мода к количеству памяти. 
Системные требования указаны при использовании настроек графических эффектов оригинала на максимуме. При полном отключении всех дополнительных эффектов требования к видеокарте соответствуют требованиям оригинальной игры при использовании динамического освещения. В процессе работы над 0693 был убран статический рендер, соответственно игра теперь всегда запускается в режиме динамического освещения. Для игры с использованием дополнительных эффектов требуется видеокарта современной архитектуры, с большим количеством шейдерных процессоров.
Внимание! Нижеуказанные системные требования являются приблизительной оценкой, и могут быть несколько завышены. Ближе к выходу модификации мы произведем тестирование на конкретных тестовых конфигурациях, и сообщим о полученных результатах.

Центральный процессор:

для игры без доп. эффектов рендеринга либо на минимальных настройках доп. эффектов в разрешениях до 1440х900: Intel Core i3-4130 либо AMD FX-4100 (или A10-6800K)
для игры на минимальных настройках доп. эффектов либо средних настройках доп. эффектов в разрешениях до 1440х900: Intel Core i3-4130 либо AMD FX-4100 (или A10-6800K)
для игры на средних настройках доп. эффектов либо на высоких настройках доп. эффектов в разрешениях до 1440х900: Intel Core i5-3570K либо AMD FX-8320
для игры на высоких настройках доп. эффектов в разрешениях до Full HD и выше: Intel Core i7-4770 либо AMD FX-8350

Видеокарта:
для игры без доп. эффектов рендеринга либо на минимальных настройках доп. эффектов в разрешениях до 1440х900: AMD Radeon HD3850 или nVidia GeForce 9600GT
для игры на средних настройках доп. эффектов либо на высоких настройках доп. эффектов в разрешениях до 1440х900: AMD Radeon HD4870 или nVidia GeForce GTX 250
для игры на высоких настройках доп. эффектов в разрешениях до Full HD: AMD Radeon HD5870 или nVidia GeForce GTX 480
для игры на высоких настройках доп. эффектов в разрешениях от Full HD и выше: AMD Radeon HD7970 или GeForce GTX 670
Учитывайте, что для мощных видеокарт требуется мощный процессор, и сочетание видеокарты, пригодной для игры на высоких настройках доп. эффектов и процессора, пригодного только для игры на низких настройках будет создавать бутылочное горлышко для производительности, и играть комфортно на таком сочетании вы сможете только на настройках, для которых пригоден процессор, т.е. на низких. Кроме этого, в любом случае в расширенных настройках графики вы можете настроить игру индивидуально под свою систему, включив или выключив необходимые вам эффекты (все настройки теперь снабжены понятным описанием их влияния на изображение), поэтому системные требования являются ориентировочными.

Место на жестком диске:
12 Гб в целом для оригинала игры и установленного на неё мода.

Необходимое программное обеспечение, установленное в системе:
- редистрибутив Microsoft Visual C++ 2005;
- Microsoft .NET Framework 3.51;
- редистрибутив DirectX 9 June 2010.


-= Отличия от версии 0692 =-


В процессе работы над графической составляющей движка были добавлены следующие оптимизации и технологии (приведены только отличия от версии 0692):
- Тень главного героя (полноценная динамическая тень от всех источников света, не фейк как на статике)
- Следы от пулевых попаданий на телах людей и монстров
- Возможность настроить плотность и дальность отрисовки травы.
- Возможность включить тени, отбрасываемые травой.
- Полноэкранное сглаживание изображения. Доступны два типа - FXAA (Fast Approximate AntiAliasing) и SMAA (Subpixel Morphological AntiAliasing), первый более быстрый, второй более качественный, оба позволяют значительно улучшить качество изображения.
- Правильные тени от солнца, с длиной, соответствующей реальному углу падения солнечных лучей.
- Объёмные лучи света на частицах пыли в воздухе, можно выбрать вариант из Crysis или же вариант из STALKER: Чистое Небо. Второй вариант выглядит более достоверно, но так же и имеет больший эффект на снижение производительности.
- Мягкие края воды - теперь вода у края водоемов не выглядит жесткой плоскостью.
- Мягкие частицы - эффекты частиц, такие как дым, пыль, туман и т.п. теперь не имеют резких граней, проявляющихся при их взаимодействии с геометрией уровня.
- Мягкие края теней.
- Глобальное освещение - технология, позволяющая при расчете освещенности объектов учитывать их взаимное затенение и затенение деталями геометрии. Создает более правдоподобную картину освещения с полутенями, доступно два разных алгоритма, SSDO и HBAO.
- Улучшенная рельефность поверхностей с использованием алгоритма Steep parallax mapping. Этот алгоритм использует для расчета рельефности трассировку лучей вместо карт высот, что дает более реалистичный и качественный эффект.
- Эффекты фокусировки глаз и глубины сцены при прицеливании, перезарядке и взгляде на близкие и далекие объекты.
- Засветы от ламп.
- Грязь на линзе.
- Капли дождя на стекле шлема или противогаза главного героя.
- Динамические лужи от дождя.
- Намокание поверхностей во время дождя.
- Объемный свет от некоторых ламп.
- Правдоподобные отражения на воде и мокром асфальте.
- Объёмный туман.
- Эффект увеличения резкости изображения.
- Ностоящие коллиматорные прицелы на оружии, с самосветящейся прицельной отметкой видимой при любом освещении
- Эффекты нахождения под водой

Улучшения игровой платформы и движка (приведены только отличия от версии 0692):
- В скриптовую систему внедрена уникальная отладочная скриптово-движковая система для отлова зависаний биндеров, полностью исключающая ситуации с зависанием алайфа, и получения развернутой информации по сбоящим модулям и последовательности их вызова, что позволяет оперативно устранять любые возникаюшие проблемы.
- Ликвидирован баг оригинала с неработоспособностью пулезащиты брони. Из-за этого бага в оригинале броня защиты от огнестрельного оружия не давала, и даже напротив, чем выше была пулезащита у брони, тем больший урон наносился игроку попаданием из огнестрельного оружия.
- Сделана совершенно новая, уникальная система хранения внутриигровых данных и переменных, обеспечивающая практически неограниченное пространство для хранения, что позволяет не упереться в лимиты при создании большого количества квестов.
- Переработана и улучшена система поддержки интерфейсом игры широкоформатных разрешений - больше никакого перерастягивания текстур, элементов интерфейса и т.п. проблем.
- Исправлено возникновение движковых вылетов оригинала вида e_parent && e_entity, возникающих при убийстве NPC, находящегося в процессе перезарядки оружия.
- Добавлена система для оснащения оружия сменными прицелами, подствольными дробовиками и другим оснащением. К сожалению, нам не удалось в приемлемые сроки интегрировать в игру соответствующее оружие вменяемого качества, однако вся система полностью доступна для использования разработчиками дополнений.
- Сделан рефакторинг и оптимизация скриптового кода (а критические места кода полностью переписаны), что позволило добиться ещё большей стабильности работы, чем это было достигнуто в версии 0.6.9.2
- Движок полностью автономен и без DRM-защиты, однако файлы оригинальной игры все еще требуются для работы мода.
- Новая система быстрых и сохраняемых таймеров.
- Система автоматического подключения скриптовых схем и модулей с обработкой ошибок.
- Внедрены новые удобные инструменты для разработки и тестирования - система сбора отладочной информации, редактор шейпов и т.д.
- Полностью переделана система работы с нетпакетами, сделана удобной для использования и безопасной.
- Полностью поправлены все возможные проблемы с менеджером состояний, вызывавшие зависания NPC при смене схем поведения.
- Все схемы поведения доработаны, по возможности улучшены и между ними устранены все возможные конфликты.
- Реализованы не работавшие в оригинале игры эффекты уникальной брони, такие как заживление ран, остановка кровотечения, голод, утомляемость.
- Реализованы одеваемые на броню экзоскелеты, одеть их можно практически на любую броню (хоть на свитер) кроме научных скафандров (мешает система регенерации воздуха за спиной) и тяжелой армейской брони (слишком габаритная).
- Исправление движкового бага с неправильным визуалом актора.
- ПнВ теперь выполнены одеваемыми приборами и продаются отдельно от брони.
- Новый прибор - тепловизор.
- Отдельные слоты для всего оборудования (ножа, детектора, биодетектора, шлема или противогаза, ПнВ).
- Продвинутые источники света, включая лампы наружного освещения и прожектора с возможностью скриптового управления (включение/выключение по расписанию и т.п.).
- Исправление движкового бага с невозможностью переключить тип гранаты в руках.
- Исправление бага с впаданием NPC в состояние паники, из которого они уже не могут выйти.
- Перехват клавиш - теперь любое скриптовое действие можно назначить на любую клавишу, что позволяет сделать удобное управление любыми приборами, устройствами и механизмами. Широко используется в моде.
- Единая удобная база скриптового спавна.
- Новая движковая погодная система с рандомизацией погодных циклов. (ещё в работе)
- Переработанный менеджер оружия.
- Переработана и дополнена схема реакции на опасности, устранены проблемы оригинала с реакцией на несущественные опасности, самопуганием и последующим длительным поиском источника опасности. Внедрена реакция на обнаружение трупов дружественных NPC.

Геймплейные и скриптовые улучшения (приведены только отличия от версии 0692):
- Новая скриптовая боевка на замену убогой движковой - с маневрированием, разными моделями поведения, использованием укрытий и устраиванием засад. С растущей сложностью и более умным поведением пропорционально опытности NPC.
- Добавлено большое количество уникальных сделанных вручную квестов с нестандартными сюжетами. Множество новых задействованых в квестах устройств и предметов, включая читаемые книги, сейфы с кодовыми замками, музыкальный автомат и т.п.
- Дополнена и удлинена сюжетная линия.
- Добавлены проводники для быстрого перемещения по уже посещенным локациям.
- Адаптирован модуль оффлайновой жизни мода АМК (опционально отключаемо) с генерируемыми на основе оффлайновой жизни новостями.
- Переработана схема переодевания брони NPC и напарником.
- Переработан алгоритм обхода аномалий, используется двойная схема, рестрикторно - алгоритмическая. Сделана система для исключения спавна динамических аномалий на заранее проложенных маршрутов квестовых персонажей и в зонах переходов.
- Переработана система сна, интерфейс и скриптовая часть. Под дождем спать нельзя, необходимо находиться в укрытии. Сон на открытом месте в отсутствии дружественных NPC или напарника поблизости может окончиться фатально в результате нападения на спящего главгероя.
- Сделана система регулировки численности населения и монстров в Зоне, бесконтрольный респавн невозможен.
- Серьезно доработан транспорт, его физика, интерфейс и взаимодействие с ним. Теперь его необходимо заправлять, багажник представляет собой нормальный игровой интерфейс, поправлены углы обзора камеры в транспорте, трава на локациях больше не проходит сквозь модель машины, отображаясь в её салоне. В машине можно ездить вместе с напарником.
- Переработан управляемый БТР, его система управления и наведения. При езде на нём с напарником он может помогать вести огонь из орудия, беря на себя управление наведением и стрельбой. В нем можно спать и пережидать выброс.
- Во время выброса отключается вся электроника, включая ПнВ и системы электроники БТР.
- Доработаны эффекты воздействия монстров на главгероя.
- Сделаны управляемые пулеметы и переносные пулеметные турели (можно взять с собой стационарный пулемет, принести его, развернуть и вести огонь).
- Новый доработанный и озвученный биодетектор, не требует ношения на поясе разлагающихся частей трупов, все определямые существа добавляются покупаемыми пакетами прошивок.
- Мини-игры с квестовыми персонажами.
- Новый автодоктор с настраиваемым интерфейсом, заряжается картриджами препаратов.
- Новая система динамических костров, реагирующая так же и на главного героя.
- Переработанная система торговли транспортом.
- Эффекты критических попаданий по главному герою - у вас выстрелом могут выбить из рук оружие, могут сделать тяжелый хедшот и т.п.
- Эффекты возгорания NPC и монстров при использовании на них огнемета, новые реалистичные эффекты пламени огнемета, возможность использования огнемета напарником и NPC.
- Переработанный модуль медленного лечения и эффектов вырабатывания привыкания к действию препаратов, новые препараты.
- Доработана система укрытий от выброса, при нахождении в укрытии появляется соответствующая иконка.
- Переработан миниган, его модель, озвучка, анимации и т.п. Работает предварительная раскрутка стволов.
- Рандомные награды по типовым квестам, с возможностью укомплектовать себе награду самостоятельно.
- Рандомное наполнение тайников.
- Новый, переработанный выброс (ещё в работе).
- Переработанная схема обыска трупов с новыми анимациями и комментариями по поводу гибели обыскиваемого.
- Новая версия схемы "Компаньоны" - улучшенная и тщательно доработанная. С напарником можно легко и удобно, без задержек, переходить между локациями, ездить в транспорте, появился селектор типа используемого оружия. Напарник снабжен улучшенным скриптовым боевым интеллектом, грамотность ведения боя растет с его опытом.
- Доработано состояние зомбированности главгероя.
- Доработана схема лагеря, теперь NPC не дерутся за места у костра и т.п.

Доработки мира и локаций:
- Все локации полностью переработаны - поправлена вся оставшаяся от оригинала недоработанной геометрия, добавлена новая, локации расширены, снабжены трехмерными панормами вокруг (создают эффект бесконечного мира), на локациях полностью переделана AI-сетка, поправлены все дыры в ней и множественные наложения.
- Добавлены новые локации с заселением и квестами на них.

На данный момент в разработке ещё остаются следующие части мода, требующие доводки:
- Переработка вооружения и оружейной концепции мода
